<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        @font-face {
            font-family: Gorton;
            src: url(fonts/GortonDigitalRegular.otf);
        }

        @font-face {
            font-family: Berkley;
            src: url(fonts/TX-02-Trial-Regular.otf);
        }

        body {
            font-family: Berkley, 'Courier New', Courier, monospace, monospace;
            background-color: whitesmoke;
        }

        .container {
            border: 2px solid black;
            margin: 3% 25%;
            text-align: center;
            height: 50%;
        }

        .light {
            height: 8px;
            width: 8px;
            background-color: red;
            border-radius: 50%;
            display: inline-block;
            margin: 0px 7px 3px 0px;
        }
    </style>

    <script>
        async function fetchIcecastMetadata() {
            try {
                const response = await fetch('https://stream.no-soap.net/status-json.xsl');
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                console.log('Data:', data);

                let nowPlaying = '';


                if (Array.isArray(data.icestats.source)) {
                    nowPlaying = data.icestats.source[0].title || 'No metadata available';
                } else {
                    nowPlaying = data.icestats.source.title || 'No metadata available';
                }


                let [songTitle, artistName] = nowPlaying.split(' - ');


                songTitle = `"${songTitle.trim()}"`;


                document.getElementById('metadata').textContent = `${songTitle} - ${artistName.trim()}`;
            } catch (error) {
                console.error('Error fetching Icecast metadata:', error);
                document.getElementById('metadata').textContent = 'Error loading metadata';
            }
        }

        setInterval(fetchIcecastMetadata, 10000);

        fetchIcecastMetadata();

    </script>
</head>

<body>

    <div class="container">


        <br>
        NO SOAP, RADIO<br>
        <span class="light"></span>CURRENTLY BROADCASTING ON: A.M. 1660 kHz<br>
        NEAR: KNOXVILLE, TN, U.S.A.<br>
        NOW PLAYING:
        <br><br>

        FOR FIELD TESTING ONLY:<br><br>
        <img style="width: 100%;" src="chart.png">
        <br><br>
        studio (at) no-soap.net<br>
        <em>"HERE, THERE, AND EVERYWHERE"</em>
        <br><br>


    </div>


</body>


</html>